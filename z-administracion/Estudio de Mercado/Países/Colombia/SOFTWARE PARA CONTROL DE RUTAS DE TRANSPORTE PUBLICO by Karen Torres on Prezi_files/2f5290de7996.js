var optimizelyLogging=function(){"use strict";var my={};my.logOptimizelyData=function(){if(!window.optimizely){return}var logLines=my.extractOptimizelyData(window.optimizely.get("state"));if(logLines.length>0){for(var i=0;i<logLines.length;i++){$.jsonlog(logLines[i])}}};my.extractOptimizelyData=function(optimizelyState){var extractedData=[];var activeExperiments=optimizelyState.getActiveExperimentIds();var variationIdsMap=optimizelyState.getVariationMap();for(var i=0;i<activeExperiments.length;i++){var experimentId=activeExperiments[i];if(variationIdsMap.hasOwnProperty(experimentId)){var variationId=variationIdsMap[experimentId].id;var variationName=variationIdsMap[experimentId].name;extractedData.push(my.createLogDict(experimentId,variationId,variationName))}}return extractedData};my.createLogDict=function(experimentId,variationId,variationName){return{_action:"enter",_category:"optimizely_data",object:"optimizely_data",trigger:"visit",optimizely_user_id:my.getOptimizelyUserId(),putma_id:my.getPutmaId(),experiment_id:experimentId,variation_id:variationId,variation_name:variationName,user_id:my.getUserId()}};my.getOptimizelyUserId=function(){return $.cookie("optimizelyEndUserId")};my.getPutmaId=function(){return $.cookie("__putma")};my.getUserId=function(){var Site=window.Site;return Site.user_id?parseInt(Site.user_id):0};return my}();$(document).ready(function(){optimizelyLogging.logOptimizelyData()});
